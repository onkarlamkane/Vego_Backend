#######################################################
# VegoBike Application - Production Environment
#######################################################
spring.application.name=VegoBike-PROD
info.app.name=VegoBike Production Server
info.app.description=Production environment for VegoBike Rental System
info.app.version=@project.version@

#######################################################
# DATABASE CONFIGURATION - RDS MySQL
#######################################################
spring.datasource.url=jdbc:mysql://vegodatabase-1.cb0ug8wy8opk.ap-south-1.rds.amazonaws.com:3306/qaktgayw_uat2?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Kolkata&useUnicode=true&characterEncoding=UTF-8
spring.datasource.username=admin
spring.datasource.password=adminEptiq
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# HikariCP Connection Pool - Production Optimized
spring.datasource.hikari.maximum-pool-size=25
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.pool-name=VegoBike-HikariCP-Prod

#######################################################
# JPA/HIBERNATE CONFIGURATION - Production
#######################################################
spring.jpa.show-sql=false
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.batch_size=25
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.connection.provider_disables_autocommit=true
spring.datasource.hikari.auto-commit=false
spring.jpa.properties.hibernate.generate_statistics=false
spring.jpa.generate-ddl=false
spring.data.jpa.repositories.enabled=true

# Schema validation fixes
spring.jpa.properties.hibernate.globally_quoted_identifiers=true
spring.jpa.properties.hibernate.globally_quoted_identifiers_skip_column_definitions=true
spring.jpa.defer-datasource-initialization=false

#######################################################
# REDIS CONFIGURATION - Production
#######################################################
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.timeout=3000ms
spring.data.redis.database=0
spring.data.redis.lettuce.pool.max-active=10
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=2
spring.data.redis.lettuce.pool.max-wait=2000ms

#######################################################
# JWT CONFIGURATION - Production (ENHANCED)
#######################################################
jwt.secret-key=72c3ced05d1a2c5e3d7259b6f5bdcaef019f92aa92bcdcef4fb64d367aa03005
jwt.expiration=3600000
jwt.refresh-token-expiration=604800000
jwt.issuer=VegoBike-Prod
jwt.header=Authorization
jwt.prefix=Bearer

#######################################################
# SERVER CONFIGURATION - Production
#######################################################
server.port=8080
server.address=0.0.0.0
server.servlet.context-path=/
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true
server.error.include-stacktrace=never
server.error.include-message=never
server.error.include-binding-errors=never
server.error.include-exception=false
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.http2.enabled=true

#######################################################
# FILE UPLOAD CONFIGURATION - Production
#######################################################
app.files.public-base-url=https://api.eptiq.com/uploads/
image.upload-dir=/opt/app/uploads
app.upload.dir=/opt/app/uploads
app.upload.max-size=10MB
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=15MB

#######################################################
# EXTERNAL API CONFIGURATIONS - Production
#######################################################
msg91.authkey=404975ADKNeF6q4btb64f36c23P1
msg91.sendOtpTemplateId=64f36a3cd6fc0568764484b3
msg91.api.base=https://control.msg91.com/api/v5
msg91.timeout=10000

gps.api.base=https://track4.millitrack.com/api/middleMan
gps.api.token=ZXlKaGJHY2lPaUpJVXpJMU5pSjkuZXlKemRXSWlPaUl3SWl3aWFYTnpJam9pWjNCekxYUnlZV05yWlhJaUxDSnBZWFFpT2pFMk9UZzVNalE0TmpGOS5VTjM1VHA5WXBnTUlPLUw2Zzl5TkpxZ3ZGdzF4Q3RBSTlKWWxXelFiSl9B
gps.api.imei=864943042640629
gps.api.timeout=15000

razorpay.key_id=rzp_test_6iRE2VEfQ2p7qE
razorpay.key_secret=qK3roYl1NgO7VzA013gsoUN9
razorpay.webhook.secret=your_production_webhook_secret
razorpay.currency=INR
razorpay.timeout=30000

#######################################################
# LOGGING CONFIGURATION - Production
#######################################################
logging.level.root=WARN
logging.level.com.eptiq.vegobike=INFO
logging.level.org.springframework.security=WARN
logging.level.org.springframework.web=WARN
logging.level.org.hibernate=WARN

# ? TEMPORARY: Debug logging for deployment troubleshooting
logging.level.org.springframework.beans.factory=DEBUG
logging.level.org.springframework.context=DEBUG

logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%X{correlationId:-}] %logger{50} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%X{correlationId:-}] %logger{50} - %msg%n
logging.file.name=/var/log/vegobike/vegobike-prod.log
logging.file.max-size=50MB
logging.file.max-history=30
logging.logback.rollingpolicy.clean-history-on-start=true

#######################################################
# CACHE CONFIGURATION - Production
#######################################################
spring.cache.type=redis
spring.cache.redis.time-to-live=3600000
spring.cache.cache-names=users,models,stores,categories,brands

#######################################################
# ACTUATOR CONFIGURATION - Production
#######################################################
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.endpoint.info.enabled=true
management.endpoint.metrics.enabled=true
management.security.enabled=true
management.server.port=8080

#######################################################
# API DOCUMENTATION - Production
#######################################################
springdoc.api-docs.enabled=false
springdoc.swagger-ui.enabled=false

#######################################################
# ENVIRONMENT SPECIFIC FLAGS - Production
#######################################################
app.environment=production
app.debug.enabled=false
app.feature.email-verification=true
app.feature.sms-verification=true
app.feature.payment-gateway=true